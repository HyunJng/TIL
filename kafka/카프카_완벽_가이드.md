> 인프런 '카프카 완벽 가이드' 수강 후 정리

## Topic 이란?
* 토픽은 partition으로 구성된 일렬의 로그 파일
    * RDBMS의 Table과 유사한 기능
    * Topic은 key와 value 기반의 메시지 구조.
    * value로는 어떤 타이의 메시지도 가능(문자열, 객체, 숫자값 등)
    * 로그 파일과 같이 연속적으로 발생하는 데이터를 저장하는 구조
    * 데이터는 append만 됨. 한번 들어가면 update 불가. 즉 **순차적**임. 

## Topic 과 Partition
![카프카완벽가이드_1.png](/kafka/images/%EC%B9%B4%ED%94%84%EC%B9%B4%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C_1.png)
* 토픽은 1개 이상의 파티션을 가질 수 있음
* 토픽의 파티션의 Kafka의 병렬 기능과 가용성 기능의 핵심 요소.

## Broker
* 피지컬적인 서버 하나

## Topic 과 Partition 과 Offset
* 개별 파티션은 정렬되고, 변경할 수 없는 일렬의 레코드로 구성된 로그 메시지.
* 개별 레코드는 offset으로 불리는 일렬의 번호를 할당받음
* 개별 파티션은 다른 파티션과 완전히 독립적임
* 개별 파티션 내에서 정렬되고 offset이 할당됨.

## Topic 과 Partition의 병렬 분산 처리
![카프카완벽가이드_2.png](/kafka/images%2F%EC%B9%B4%ED%94%84%EC%B9%B4%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C_2.png)
* producer은 여러 partition으로 보낼 수 있고
* consumer도 여러 partition에서 가져올 수 있음

![카프카완벽가이드_3.png](/kafka/images%2F%EC%B9%B4%ED%94%84%EC%B9%B4%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C_3.png)
* 여러 카프카 브로커들에 분산 저장될 수 있음
* Broker 각각은 IP가 다른 서버임. 서로 연결된 무언가가 있긴 함.

## Cluster에서의 가용성
![카프카완벽가이드_4.png](/kafka/images%2F%EC%B9%B4%ED%94%84%EC%B9%B4%EC%99%84%EB%B2%BD%EA%B0%80%EC%9D%B4%EB%93%9C_4.png)
* 하나가 내려가면 메시지가 유실되기에 가용성이 매우 중요.
* replication-factor을 지정하면 복제 영역에 서로의 메시지 상태를 복제하여 가지고 있게 됨.