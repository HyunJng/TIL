# item 51. 메서드 시그니처를 신중히 설계하라

## 1. 개요

메서드를 설계할 때 이름, 매개변수 개수/타입, 반환타입 등 시그니처는 API의 품질을 크게 좌우한다.
한 번 공개된 API는 쉽게 바꿀 수 없기 때문에 **메서드 시그니처는 처음부터 신중하게 설계해야 한다.**

---

## 2. 핵심 원칙

### 2.1 메서드 이름은 신중하게 짓기

* 의미가 분명하고, 일관성이 있어야 한다.
* 자바 표준 라이브러리의 관례를 따르는 것이 가장 안전하다.

    * 값 반환: `toX`, `asX`
    * 객체 생성: `of`, `from`
    * 변환: `convert`, `transform`
    * 검사: `is`, `has`, `can`

---

### 2.2 매개변수 목록은 짧게 유지

* 매개변수는 **4개 이하**가 권장된다.
* 매개변수가 많아지면 사용성, 가독성, 실수 가능성이 모두 나빠진다.

---

## 3. 매개변수 개수를 줄이는 기법

### 3.1 여러 메서드로 쪼개기

* 하나의 메서드에 너무 많은 역할을 부여하지 않는다.
* 여러 개의 기능을 담당하는 메서드는 작은 기능들로 나누는 것이 낫다.
* 예) 전체 List가 아닌 지정된 범위의 부분 리스트에서의 인덱스를 찾고 싶은 상황
    * 하나의 메서드로 구현하면 '부분리스트시작', '부분리스트끝', '찾을 원소' 3개 입력 필요
    * 대신, 부분리스트를 반환하는 subList 메서드와 워소의 인덱스를 알려주는 indexOf 메서드를 제공한다
    * `testList.asList(1, 3).indexOf('a')`

### 3.2 파라미터 객체(Parameter Object) 도입

* 서로 연관된 매개변수가 3개 이상 있다면 별도 클래스로 묶는다.
* 예:

    * 좌표(x, y) → `Point`
    * 기간(start, end) → `Period`
* 이 방법은 DDD의 Value Object와 동일한 설계 철학과도 맞닿아 있다.

### 3.3 빌더 패턴 활용

* 선택적 파라미터가 많은 경우 빌더가 이상적이다.
* 클라이언트 코드를 읽기 쉽고 실수를 줄인다.

---

## 4. 매개변수 타입 선택 지침

### 4.1 지나치게 구체적인 타입을 피하기

* 파라미터는 **인터페이스**나 **추상 타입**으로 받는 것이 이상적이다.
* 예:

    * 잘못된 예: `ArrayList`를 받는 메서드
    * 좋은 예: `List`나 `Collection`

→ 유연성이 높아지고, 모듈 간 결합도가 낮아진다.

---

### 4.2 boolean 매개변수는 피하기

* boolean은 의미가 명확하지 않아 메서드를 읽기 어렵다.
* 예:

    * `drawImage(true)` → 의미가 모호함
    * 대안: `drawThumbnail()` / `drawFullSize()` 처럼 메서드 분리

---

### 4.3 문자열을 enum으로 대체

* 문자열은 오타에 취약하고 타입 안정성이 없다.
* 의미 있는 값 집합이면 반드시 enum을 사용하라.

### 4.4 같은 타입의 매개변수를 여러개 연달아 나오게 만들지 말자

* 사용자가 매개변수 입력 순서를 틀려도 컴파일러가 오류를 인지할 수 없다.

---

## 5. 매개변수 검증 시 주의점

### 5.1 유효한 값 범위는 문서화

* 매개변수가 어떤 조건을 만족해야 하는지 명확히 알려야 한다.
* Javadoc의 `@param`에 조건 기재.

### 5.2 유효성 검사는 메서드 시작 부분에서 실행

* 잘못된 매개변수를 조기에 차단하여 오류를 방지한다.

---

## 6. 오버로딩 설계 시 주의점

### 6.1 오버로딩은 신중하게 사용

* 혼란을 주지 않도록 매개변수 타입이 명확히 구분되도록 한다.
* `List<String> list = new ArrayList<>(); list.remove(1);` 같은 케이스는 유명한 함정이다.

    * `remove(int index)` vs `remove(Object o)` 모호성

---

## 7. 가변인수(varargs) 사용 주의사항

* 가변인수는 **인수 개수가 많은 경우에만 필요**한 패턴이다.
* 오버로드와 조합하면 혼동을 일으킬 수 있다.