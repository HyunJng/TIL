# 카탈란 수 (Catalan Number)

## 1. 카탈란 수란?

* 단순 공식이 아니라, **큰 문제를 두 개의 부분 문제로 나누는 구조**에서 자연스럽게 등장.
* 점화식
  ![카틀란수_1.png](/algorithm/images/카틀란수_1.png)

  - 곱셈이 들어감 → 조합의 개수를 세는 문제
---

## 2. 왜 이런 점화식이 나오나?

* 공통 아이디어: **큰 구조를 기준점으로 두 개의 작은 구조로 쪼갤 수 있다.**
* 한쪽 크기를 `i`로 정하면, 반대쪽은 자동으로 `n-1-i` 또는 `n-i`가 됨.
* 따라서 “왼쪽 경우의 수 × 오른쪽 경우의 수”를 모두 더한 것이 전체 경우의 수.

---

## 3. 카탈란 수가 등장하는 문제들

### (1) 올바른 괄호 문자열

* 길이 `2n` 문자열에서 **첫 괄호쌍을 어디서 닫느냐**에 따라 안쪽/바깥쪽으로 분할.
* 예: `(()())` = `( [()] ) ()`
- “즉, n개의 괄호쌍으로 된 문자열을 만들 때, **첫 괄호쌍을 닫는 위치에 따라 쪼개진다.**”

---

### (2) 이진 트리 구조의 수

* 루트 기준으로 왼쪽에 `i`개, 오른쪽에 `n-1-i`개 노드 배치.
* 각각 독립적인 경우의 수 곱으로 분해.
- “즉, n개의 노드로 된 이진 트리는, **루트를 기준으로 왼쪽/오른쪽 서브트리로 쪼개진다.**”

---

### (3) 다각형 삼각 분할

* `n+2`각형에서 한 꼭짓점에서 대각선을 어디에 긋느냐에 따라 두 부분 다각형으로 나뉨.
* 각각 삼각 분할 경우의 수 곱으로 계산.
- “즉, n+2각형을 삼각형으로 분할할 때, **대각선을 어디에 긋느냐에 따라 쪼개진다.**”

---

### (4) 격자 경로 (Dyck path)

* (0,0) → (n,n)까지 y=x 위를 넘지 않는 경로.
* **대각선과 처음 만나는 점**을 기준으로 왼쪽/오른쪽 구간으로 분리.

- “즉, n칸 경로는, **대각선과 처음 만나는 지점에 따라 쪼개진다.**”

---

### (5) 스택 Pop 순서

* 1..n을 순서대로 push/pop할 때 올바른 pop 순서의 수.
* **첫 번째 pop이 언제 일어나느냐**에 따라 분할.

- “즉, n개의 원소를 push/pop할 때, **첫 pop 시점에 따라 쪼개진다.**”

---

## 4. 공통 패턴

* 공통적으로 **“큰 문제 → (왼쪽 부분 문제) × (오른쪽 부분 문제)”**라는 DP 구조.
* 왼쪽이 `i`개면, 오른쪽은 자동으로 `n-1-i`개.
* 이로 인해 같은 점화식 $C_n = Σ C_i·C_{n-1-i}$가 도출됨.

---

## 5. 작은 예시 테이블 (DP 채우기)

* `C_0 = 1`
* `C_1 = C_0*C_0 = 1`
* `C_2 = C_0*C_1 + C_1*C_0 = 2`
* `C_3 = C_0*C_2 + C_1*C_1 + C_2*C_0 = 5`
* `C_4 = 14`